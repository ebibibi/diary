---
title: "2012-07-12"
date: 2012-07-12
tags: 
  - "debian"
---

apt-get upgradeの結果sinatraで作成してあったWebアプリ系が全滅してました。別にsinatraのせいな訳ではないですが。

歴代はてブ多い順は単独で実行すると以下のエラーが。

```
ArgumentError - comparison of Symbol with Date failed:
```

```
         hateburanking.rb:54:in `>='
```

ググると全く同じことで困っている人が。

- [Ruby 1.9 idiom - Google グループ](https://groups.google.com/forum/?fromgroups#!topic/sequel-talk/7VboJaU18F8)

リンクをたどると説明がありました。

- [virtual\_rows.rdoc](http://sequel.rubyforge.org/rdoc/files/doc/virtual_rows_rdoc.html)

```
 - @dataset = @db[:entry].filter((:date >= month_begin) & (:date <= month_end)).order(:bookmarkcount.desc)
```

```
+ @dataset = @db[:entry].filter{(date >= month_begin) & (date <= month_end)}.order(:bookmarkcount.desc)
```

これで解決しました。
