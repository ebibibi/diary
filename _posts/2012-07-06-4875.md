---
title: "2012-07-06"
date: 2012-07-06
tags: 
  - "ruby"
---

ちょっとスクリプトに手を入れた。こんな感じ。

- [今日のつぶやき : 5回 - ebi's diary - インフラエンジニアの子育てなどの日記(2012-07-05)](http://ebi.dyndns.biz/diary/20120705.html#p01)

今日やった事は

- Rubyで短縮URLを展開する。
- InstagramのWebAPIを叩いて画像のURLを取得する
- Twitterから取得してきたつぶやき内に該当するURLが含まれていたらimgタグを挿入する

という感じ。

参考にさせてもらったのは以下のページのあたり。

- [RubyでURL短縮展開のコードがきもいです... - sorah.blog](http://blog.sorah.jp/2011/01/03/ruby-url-expand-is-strange)
- [OctopressにInstagramの写真を挿入するTag Pluginを作ってみた - ni-blog](http://orihubon.com/blog/2012/03/20/instagram-tag-plugin-for-octopress/)

展開とInstagramからの情報取得のあたりは以下のような感じ。 {{gist '3060973'}} 相変わらずとりあえず動きました程度の品質ですが……。

それにしても、Twitterからの情報取得およびtdiaryへの投稿スクリプトは適当にベタで書いてしまった物だから、そろそろ拡張するのもしんどい感じになってきてしまった。ちょっと構造を作り直したりしないとだめそうだ……。
