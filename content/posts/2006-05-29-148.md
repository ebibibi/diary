---
title: "2006-05-29"
date: 2006-05-29
categories: 
  - "work"
---

今日は仕事でちょこちょこっとwebdruid for windowsを動かしてみました。

すでにwindows用のパッケージを作ってくださっている方がいるので、それをありがたく使わせていただきました。その際、設定に関して2点ほどちょっと悩むところが。

1.IISのログをどうやってwebdruidに食わせるか

IISのログは設定にもよりますが、基本的に毎日別の名前で作成されます。UNIX系なら、毎日同じ名前で作成されていて、cronで切り出して・・・という感じが多いと思うので、ログファイル名の指定が簡単なのですが・・・。うまい方法が見当たらなかったので、ちょっと(かなり?)かっこ悪いですが、毎日「type \* > access.log」ってやってログをまとめてしまい、それを食わせることにしました。

2.IISのログ(W3C)をそのままwebdruidが読み込んでくれない

IISのログはW3C形式・・・ということだし、webdruidの設定でもIISについて言及されているので、「LogType w3c」とやっておけば特に問題なく読める・・・と思ったのですが、なぜか「Truncating oversized username」というワーニングがわんさかでて、どうにもこうにも読み込んでくれませんでした。ユーザー名のところにドメインユーザーだから「\\」マークが入っているのがわるいのか、単純にログに書き出しているフィールドが多いor足りないのか・・・。Google先生に聞いても解決していない掲示板でのやり取りがいくつか見つかったくらいだったので、すぐにあきらめました。 で、しかたがないので、logconvコマンドにて形式を変換しちゃいました。これでとりあえず動くようにはなりました。

とりあえずこれで満足です。
