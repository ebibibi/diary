---
title: "2006-09-24"
date: 2006-09-24
categories: 
  - "work"
---

#### メディアサーバーに接続できない問題

BackupExec10dのリモートIDRにてまずはメディアサーバーに接続できないというエラーがでてちょっと困りました。 結局KBを調べたらすぐに原因がわかったわけですが。 273066 レジストリの変更がメディアサーバー側で必要とのことです。10dはこんなのばっかりだな…。

#### 「IDR用ブートCDは全部同じでいいのではないか?」という実験

IDRを実行する際にCDを使っているのですが、結局ASRとIDRの情報さえ指定することが可能ならCDの中身はどのサーバーでも全部一緒でいいのではないかとおもって実験してみたのですが、結論からいうと、「最低でもローカルIDRとリモートIDRではCDの中身が違う」ことが判明しました。やってみたらリストア実行まではうまくいったのですが、「リモートエージェントが入っていないから実行できない」って怒られちゃいました。何か勘違いしているかもしれませんし、全部にローカルドライブがついているなら1つのCDのみで行けてしまうかもしれませんが、まぁ、全サーバー分つくった方が無難っぽいです…。

#### バックアップ、リストア、IDRに関する雑感

私が以前このあたりをいじったのは入社1年目(4年くらい前)だったのですが、その頃はIDRを使うメリットなんて一つも感じられなかったし(結局OSと、BackupExecをインストールしてからフルリストアするのと時間も手間もあまり変わらない)、結局リストアしたって、ドライバは元に戻らないし、なんだかアプリケーションがおかしくなるし・・・で、いけてないなぁという思いしかありませんでした。

で、今回触ってみたら、ASRをつかうことできちんとドライバ類も戻るし、CDを事前に作っておいて結構簡単に戻せるし・・・でなかなかいいじゃないかと思いました。ちゃんと進化してますね。(ゆっくりと…)

でも、結局バックアップ検証中にはRAID1のディスクの片方を抜いておいて検証して、検証がおわったらそのディスクに戻す・・・ということをしました。これはもう一発で元に戻ります。やっぱりまだまだこの方法が一番確実に戻るなぁ。という感想。

ソフトウェアを戻すためにソフトウェアレイヤーでうんぬんするのは得策ではないんじゃないか?別レイヤーで(ハードウェアレイヤーが簡単だと思いますが)扱うべきなのではないか?という気がします。

全部SAN上にOSからデータから何から何までおいてしまって、それをハードウェア的にコピーしてしまうのが素敵な気がするなぁ…。(それはそれで大変だろうとは思うけれども)
